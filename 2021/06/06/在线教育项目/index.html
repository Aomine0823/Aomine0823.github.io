<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, shrink-to-fit=no">
    <meta name="referrer" content="origin">
    <meta http-equiv="Cache-Control" content="no-transform">
    <meta http-equiv="Cache-Control" content="no-siteapp">
    <title>在线教育项目</title>

    <link type="text/css" rel="stylesheet" href="https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/font/LongCang.css">
    <link type="text/css" rel="stylesheet" href="https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/font/Monda.css">
    <link type="text/css" rel="stylesheet" href="https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/font/NotoSansSC.css">
    <link type="text/css" rel="stylesheet" href="https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/font/Playball.css">
    <link type="text/css" rel="stylesheet" href="https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/font/PTMono.css">
    <link type="text/css" rel="stylesheet" href="https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/font/RobotoSlab.css">
    <link type="text/css" rel="stylesheet" href="https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/font/Rosario.css">
    <link type="text/css" rel="stylesheet" href="https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/font/UbuntuMono.css">

    <link type="text/css" rel="stylesheet" href="https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/css/post.css">
    
        <link type="text/css" rel="stylesheet" href="https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/css/normal.css">
    

    <script type="text/javascript" src="https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/js/jquery-3.4.1.min.js"></script>

</head>
<body>
    <a id="cover"></a>
    <div id="header">
    <div class="header">
        <div class="vertical">
            <div class="inner">
                <h1 class="header-subtitle">在线教育项目</h1>
                <div class="header-subinfo">
                    <p class="article-info-text">
                        <span>
                            <i class="iconfont icon-time"></i> 发表时间：2021-06-06
                        </span>
                        
                            <span id="/2021/06/06/在线教育项目/" class="leancloud_visitors" data-flag-title="在线教育项目">
                                <i class="iconfont icon-browse"></i> 阅读：<sapn class="leancloud-visitors-count"></span>
                            </span>
                        
                        <span>
                            <i class="iconfont icon-interactive"></i> 评论：<span class="valine-comment-count" data-xid="/2021/06/06/在线教育项目/"></span>
                        </span>  
                    </p>                 
                </div>
            </div>
        </div>
        <canvas id="articleHeaderCanvas"></canvas>
    </div>
</div>
    <div id="container">
    <div id="content">
        <div id="article">
    <div class="toc"></div>
    <div class="article-body">
        <h1 id="商业模式"><a href="#商业模式" class="headerlink" title="商业模式"></a>商业模式</h1><p><strong>本项目采用：B2C模式</strong></p>
<p> <strong>两个角色：</strong></p>
<p><strong>管理员： 添加 修改 删除</strong></p>
<p><strong>普通用户：查询</strong></p>
<p><strong>最核心的模块：课程模块</strong></p>
<p>电商平台常采用：B2B2C模式</p>
<p>三个角色</p>
<p>自营：</p>
<p>普通商家：入驻</p>
<p>普通用户：</p>
<h1 id="项目功能"><a href="#项目功能" class="headerlink" title="项目功能"></a>项目功能</h1><p><strong>系统后台：管理员使用</strong></p>
<p>1.讲师管理模块</p>
<p>2.课程分类管理模块</p>
<p>3.课程管理模块</p>
<p>​    (1)视频</p>
<p>4.统计分析模块</p>
<p>5.订单管理</p>
<p>6.banner管理</p>
<p>​    轮播图等等，从数据库中取出来</p>
<p>7.权限管理</p>
<p><strong>系统前台：普通用户使用</strong></p>
<p>1.首页数据的显示</p>
<p>2.讲师列表和详情</p>
<p>3.课程列表和课程详情</p>
<p>​    (1)视频在线播放</p>
<p>4.登录和注册</p>
<p>5.微信扫码登录</p>
<p>6.微信扫描支付</p>
<h1 id="项目中使用的技术"><a href="#项目中使用的技术" class="headerlink" title="项目中使用的技术"></a>项目中使用的技术</h1><p>前后端分离开发</p>
<p>全栈开发？笑yue了</p>
<p>后端技术：</p>
<p>1.springboot</p>
<p>2.springcloud</p>
<p>3.MybatisPlus</p>
<p>4.springsecurity</p>
<p>redis maven easyExcel jwt OAuth2 </p>
<p>前端技术：</p>
<p>vue + element-ui + axios + nodejs ……</p>
<p>其他技术：</p>
<p>阿里云oss</p>
<p>阿里云视频点播服务</p>
<p>阿里云短信服务</p>
<p>微信支付和登录</p>
<p>docker</p>
<p>git</p>
<p>jenkins</p>
<h1 id="创建springboot工程"><a href="#创建springboot工程" class="headerlink" title="创建springboot工程"></a>创建springboot工程</h1><p>版本2.2.1.RELEASE</p>
<h2 id="Maven"><a href="#Maven" class="headerlink" title="Maven"></a>Maven</h2><p>在后端开发中，使用过maven，maven构建项目，管理jar依赖，联网下载依赖</p>
<h1 id="MyBatis"><a href="#MyBatis" class="headerlink" title="MyBatis"></a>MyBatis</h1><p>在mysql中初始化</p>
<h1 id="建立依赖"><a href="#建立依赖" class="headerlink" title="建立依赖"></a>建立依赖</h1><p>1.spring-boot-starter</p>
<p>2.spring-boot-starter–test</p>
<p>3.mybatis-plus-boot-starter（baomidou）</p>
<p>4.mysql-connector-java</p>
<p>5.lombok  //用来简化实体类的开发，只需要加个注解，getset方法都不用写</p>
<h1 id="安装lombok（这个好牛逼！）"><a href="#安装lombok（这个好牛逼！）" class="headerlink" title="安装lombok（这个好牛逼！）"></a>安装lombok（这个好牛逼！）</h1><h1 id="注解"><a href="#注解" class="headerlink" title="注解"></a>注解</h1><p>1.@Data    </p>
<p>​    应用lombok插件，提高代码的简洁，使用这个注解可以省去代码中大量的get()、 set()、 toString()等方法</p>
<p>2.@MapperScan</p>
<p>​    指定要变成实现类的接口所在的包，然后包下面的所有接口在编译之后都会生成相应的实现类</p>
<p>3.@Autowired</p>
<p>​    把service注入</p>
<p>4.@Service</p>
<p>5.@@TableField(fill = FieldFill.INSERT)</p>
<p>​    自动填入</p>
<p>6.@TableField(fill = FieldFill.INSERT_UPDATE)</p>
<p>​    自动更新或者如果是第一次的话自动填入</p>
<p>7.Configuration</p>
<p>​    </p>
<p>8.TableLogic</p>
<p>9.RestController</p>
<p>10.RequestMapping</p>
<p>11.Api/ApiOperation</p>
<p>12.RequestBody</p>
<p>使用json传递数据，把json数据封装到对应对象里面</p>
<p>如果用这种方式，需要改成post提交方式，把GetMapping改成PostMapping，还要加上一个属性，：required = false，表示这个值可以没有</p>
<p>13.ResponseBody</p>
<p>返回数据，返回json数据</p>
<p>14.@ControllerAdvice</p>
<p>15.@Component</p>
<p>将类交给spring管理</p>
<h1 id="mp实现添加操作"><a href="#mp实现添加操作" class="headerlink" title="mp实现添加操作"></a>mp实现添加操作</h1><hr>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line">public  void addUser()&#123;</span><br><span class="line">    User user = new User();</span><br><span class="line">    user.setName(&quot;lucy&quot;);</span><br><span class="line">    user.setAge(30);</span><br><span class="line">    user.setEmail(&quot;lucy@qq.com&quot;);</span><br><span class="line">    int insert = userMapper.insert(user);</span><br><span class="line">    System.out.println(&quot;insert:&quot;+insert);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>不需要设置id值（主键）</p>
<p>mp自动生成id值</p>
<h2 id="主键生成策略"><a href="#主键生成策略" class="headerlink" title="主键生成策略"></a>主键生成策略</h2><p>（1）</p>
<p>​    自动增长：AUTO INCREMENT</p>
<p>​    弊端：如果分表的话，第二张表需要得到第一张表的数据量+1</p>
<p>（2）</p>
<p>​    UUID：每次操作生成随意唯一的值</p>
<p>​    弊端：排序不方便</p>
<p>（3）</p>
<p>​    redis：原子操作</p>
<p>（4）</p>
<p>​    snowflake算法：mp自带策略</p>
<pre><code>## 配置生成策略
</code></pre>
<p>在主键上面写注解 </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@TableId(type = IdType.AUTO)</span><br><span class="line">private Long id;</span><br></pre></td></tr></table></figure>

<p><img src="../pic/%E5%9C%A8%E7%BA%BF%E6%95%99%E8%82%B2%E9%A1%B9%E7%9B%AE/image-20210608161145972.png" alt="image-20210608161145972"></p>
<p>AUTO：自动增长</p>
<p>ID_WORKER：会生成一个19位的值，数字类型就是用这种策略</p>
<p>ID_WORKER_STAR：生成19位的值，字符串类型是这种策略</p>
<p>INPUT：自己设置值</p>
<p>NONE：没有策略</p>
<p>UUID：随机生成</p>
<h2 id="根据ID更新操作"><a href="#根据ID更新操作" class="headerlink" title="根据ID更新操作"></a>根据ID更新操作</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line">public void updateUser()&#123;</span><br><span class="line">    User user = new User();</span><br><span class="line">    user.setId(2L);</span><br><span class="line">    user.setAge(120);</span><br><span class="line">    int row = userMapper.updateById(user);</span><br><span class="line">    System.out.println(row);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="自动填充"><a href="#自动填充" class="headerlink" title="自动填充"></a>自动填充</h2><p>不需要set到对象里面值，是应用mp方式实现数据添加</p>
<p>在实体类里面需要进行自动填充的属性上添加注解</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">//create_time</span><br><span class="line">@TableField(fill = FieldFill.INSERT)</span><br><span class="line">private Date createTime;</span><br><span class="line"></span><br><span class="line">//update_time</span><br><span class="line">@TableField(fill = FieldFill.INSERT_UPDATE)</span><br><span class="line">private Date updateTime;</span><br></pre></td></tr></table></figure>

<p>最后实现一个类，需要新建</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">@Service</span><br><span class="line">public class MyMetaObjectHandler implements MetaObjectHandler &#123;</span><br><span class="line"></span><br><span class="line">    //使用mp实现一个增加操作，该方法就会自动实行</span><br><span class="line">    @Override</span><br><span class="line">    public void insertFill(MetaObject metaObject) &#123;</span><br><span class="line">        this.setFieldValByName(&quot;createTime&quot;,new Date(),metaObject);</span><br><span class="line">        this.setFieldValByName(&quot;updateTime&quot;,new Date(),metaObject);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //使用mp实现一个更新操作，该方法就会自动实行</span><br><span class="line">    @Override</span><br><span class="line">    public void updateFill(MetaObject metaObject) &#123;</span><br><span class="line">        this.setFieldValByName(&quot;updateTime&quot;,new Date(),metaObject);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="乐观锁"><a href="#乐观锁" class="headerlink" title="乐观锁"></a>乐观锁</h2><p>为了解决某些问题出现的东西</p>
<p>主要解决 丢失更新</p>
<p>如果不考虑事务隔离性，产生读问题</p>
<p>脏读：指一个事务读取了另外一个事务未提交的数据</p>
<p>不可重复读：指在一个事务内读取表中的某一行数据，多次读取结果不同。</p>
<p>幻读：指在一个事务内读取到了别的事务插入的数据，导致前后读取不一致。</p>
<p>写问题：丢失更新问题</p>
<p>丢失更新：</p>
<p>多个人同时修改同一条记录，最后提交的把之前提交的数据覆盖掉</p>
<p>解决方案：</p>
<p>悲观锁：一般不用，A操作的时候不许B操作，只能等待，串行操作</p>
<p>乐观锁：根据版本号进行控制。提交时比较当前数据版本和数据库版本是否一样，使版本号+1，只有先提交的才能够提交成功。</p>
<h3 id="实现步骤"><a href="#实现步骤" class="headerlink" title="实现步骤"></a>实现步骤</h3><p>1.表添加字段，作为乐观锁版本号</p>
<p><img src="../pic/%E5%9C%A8%E7%BA%BF%E6%95%99%E8%82%B2%E9%A1%B9%E7%9B%AE/image-20210608183946412.png" alt="image-20210608183946412"></p>
<p>2.对应实现类添加版本属性</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">private Integer version;//版本号</span><br></pre></td></tr></table></figure>

<p>3.在实体类版本号属性添加注解</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@Version</span><br><span class="line">private Integer version;//版本号</span><br></pre></td></tr></table></figure>

<p>4.配置乐观锁的插件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">@Configuration</span><br><span class="line">@MapperScan(&quot;com.atguigu.mpdemo1010.mapper&quot;) //扫描mapper接口中的内容</span><br><span class="line">public class MpConfig &#123;</span><br><span class="line">    /*</span><br><span class="line">    乐观锁插件</span><br><span class="line">    */</span><br><span class="line">    @Bean</span><br><span class="line">    public OptimisticLockerInterceptor optimisticLockerInterceptor()&#123;</span><br><span class="line">        return new OptimisticLockerInterceptor();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>5.测试</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">//测试乐观锁</span><br><span class="line">@Test</span><br><span class="line">public void testOptimisticLocker()&#123;</span><br><span class="line">    //根据id查询数据</span><br><span class="line">    User user = userMapper.selectById(1402218839726460930L);</span><br><span class="line">    //进行修改</span><br><span class="line">    user.setAge(200);</span><br><span class="line">    userMapper.updateById(user);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="mp简单查询"><a href="#mp简单查询" class="headerlink" title="mp简单查询"></a>mp简单查询</h2><p>1.根据id进行查询</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">User user = userMapper.selectById(1402218839726460930L);</span><br></pre></td></tr></table></figure>

<p>2.多个id的批量查询</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//多个id批量查询</span><br><span class="line">@Test</span><br><span class="line">public void testSelectDemo1()&#123;</span><br><span class="line">    List&lt;User&gt; users = userMapper.selectBatchIds(Arrays.asList(1L, 2L, 3L));</span><br><span class="line">    System.out.println(users);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>3.简单的条件查询</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">//根据  查询</span><br><span class="line">@Test</span><br><span class="line">public void testSelectByMap()&#123;</span><br><span class="line">    HashMap&lt;String,Object&gt; map = new HashMap&lt;&gt;();</span><br><span class="line">    map.put(&quot;name&quot;,&quot;Jone&quot;);</span><br><span class="line">    map.put(&quot;age&quot;,18);</span><br><span class="line">    List&lt;User&gt; users = userMapper.selectByMap(map);</span><br><span class="line">    users.forEach(System.out::println);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-分页查询"><a href="#4-分页查询" class="headerlink" title="4.分页查询"></a><strong>4.分页查询</strong></h3><p>​    与PageHelper代码差不多。</p>
<p>​    1.在配置文件中加入分页插件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line">* 分页插件</span><br><span class="line">* */</span><br><span class="line">@Bean</span><br><span class="line">public PaginationInterceptor paginationInterceptor()&#123;</span><br><span class="line">    return new PaginationInterceptor();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2.编写分页的代码</p>
<p>​    直接new page对象，传入两个参数</p>
<p>​        当前页和每页显示记录数</p>
<p>​    调用mp方法实现分页查询</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">//分页查询</span><br><span class="line">@Test</span><br><span class="line">public void testPage()&#123;</span><br><span class="line">    //1 创建配置对象</span><br><span class="line">    Page&lt;User&gt; page = new Page&lt;&gt;(1,3);//当前页和每页显示的记录数</span><br><span class="line">    //调用mp中分页查询方法</span><br><span class="line">    //调用mp分页查询过程中，底层封装</span><br><span class="line">    //把分页所有数据分装到page对象里面</span><br><span class="line">    userMapper.selectPage(page,null);//page和wrapper(条件)</span><br><span class="line">    //通过page对象获取分页数据</span><br><span class="line">    System.out.println(page.getCurrent());//当前页</span><br><span class="line">    System.out.println(page.getRecords());//每页数据list集合</span><br><span class="line">    System.out.println(page.getSize());//当前页记录数</span><br><span class="line">    System.out.println(page.getTotal());//得到当前表中的总记录数</span><br><span class="line">    System.out.println(page.getPages());//总页数</span><br><span class="line">    System.out.println(page.hasNext());//是否有下一页</span><br><span class="line">    System.out.println(page.hasPrevious());//是否有上一页</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="实现逻辑删除"><a href="#实现逻辑删除" class="headerlink" title="实现逻辑删除"></a>实现逻辑删除</h2><p>物理删除：真是删除，将对应数据从数据库中删除，之后查询不到此条被删除书库</p>
<p><strong>单个删除</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//物理删除</span><br><span class="line">@Test</span><br><span class="line">public void testDeleteById()&#123;</span><br><span class="line">    int i = userMapper.deleteById(1L);//没有L会报错，哭了</span><br><span class="line">    System.out.println(i);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>批量删除</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//批量删除</span><br><span class="line">@Test</span><br><span class="line">public void testDeleteBatchIds()&#123;</span><br><span class="line">    int i = userMapper.deleteBatchIds(Arrays.asList(8, 9, 10));</span><br><span class="line">    System.out.println(i);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>逻辑删除：假删除，将对应数据中代表是否被删除字段状态修改为“被删除状态”，之后在数据库中人就能够看到此条数据库记录</p>
<p>在表中添加delete</p>
<p><img src="../pic/%E5%9C%A8%E7%BA%BF%E6%95%99%E8%82%B2%E9%A1%B9%E7%9B%AE/image-20210609100603548.png" alt="image-20210609100603548"></p>
<p>在类中添加属性与属性注解</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@TableLogic</span><br><span class="line">private Integer deleted;</span><br></pre></td></tr></table></figure>

<p>配置逻辑删除插件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line">* 逻辑删除插件</span><br><span class="line">* */</span><br><span class="line">@Bean</span><br><span class="line">public ISqlInjector sqlInjector()&#123;</span><br><span class="line">    return new LogicSqlInjector();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在properties中配置</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mybatis-plus.global-config.db-config.logic-delete-value=1</span><br><span class="line">mybatis-plus.global-config.db-config.logic-not-delete-value=0</span><br></pre></td></tr></table></figure>

<p>测试删除</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//物理删除</span><br><span class="line">@Test</span><br><span class="line">public void testDeleteById()&#123;</span><br><span class="line">    int i = userMapper.deleteById(1402450280531963905L);</span><br><span class="line">    System.out.println(i);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>如果要找被删除的数据，用mp做不到，要用sql语句</p>
<h2 id="性能分析插件"><a href="#性能分析插件" class="headerlink" title="性能分析插件"></a>性能分析插件</h2><p>判断哪些语句运行比较快，可以做性能优化</p>
<p>在配置类中加入性能分析插件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line">* sql性能分析插件</span><br><span class="line">* 开发环境使用，线上不推荐，</span><br><span class="line">* */</span><br><span class="line">@Bean</span><br><span class="line">@Profile(&#123;&quot;dev&quot;,&quot;test&quot;&#125;)//设置dev test环境开启</span><br><span class="line">public PerformanceInterceptor performanceInterceptor()&#123;</span><br><span class="line">    PerformanceInterceptor performanceInterceptor = new PerformanceInterceptor();</span><br><span class="line">    performanceInterceptor.setMaxTime(100);//ms,超过不执行</span><br><span class="line">    performanceInterceptor.setFormat(true);</span><br><span class="line">    return performanceInterceptor;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>项目开发中的三种环境</p>
<p>dev：开发环境</p>
<p>test：测试环境</p>
<p>prod：生产环境，已经在网上发布了，所有人都能用了</p>
<p>在springboot中设置dev环境</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#环境配置</span><br><span class="line">spring.profiles.active=dev</span><br></pre></td></tr></table></figure>

<h2 id="MP条件构造器"><a href="#MP条件构造器" class="headerlink" title="MP条件构造器"></a>MP条件构造器</h2><p>wrapper：</p>
<p>一般用QueryWrapper来构建条件</p>
<p>因为querywrapper使wrapper的子类，功能更加强大</p>
<p>创建一个QueryWrapper对象</p>
<p>gt：大于</p>
<p>ge：大于等于</p>
<p>lt：小于</p>
<p>le：小于等于</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">//创建QuerryWrapper对象</span><br><span class="line">QueryWrapper&lt;User&gt; wrapper = new QueryWrapper&lt;&gt;();</span><br><span class="line"></span><br><span class="line">//通过QuerryWrapper设置条件</span><br><span class="line">wrapper.ge(&quot;age&quot;,30);//第一个参数字段的名字，第二个参数查询的值</span><br><span class="line">List&lt;User&gt; users = userMapper.selectList(wrapper);</span><br><span class="line">System.out.println(users);</span><br></pre></td></tr></table></figure>

<p>eq：等于</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">//mp实现复杂查询操作</span><br><span class="line">@Test</span><br><span class="line">public void testSelectQuery()&#123;</span><br><span class="line">    //创建QuerryWrapper对象</span><br><span class="line">    QueryWrapper&lt;User&gt; wrapper = new QueryWrapper&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    //通过QuerryWrapper设置条件</span><br><span class="line">    wrapper.eq(&quot;name&quot;,&quot;笨逼&quot;);//第一个参数字段的名字，第二个参数查询的值</span><br><span class="line">    List&lt;User&gt; users = userMapper.selectList(wrapper);</span><br><span class="line">    System.out.println(users);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ne：不等于</p>
<p>between：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">//mp实现复杂查询操作</span><br><span class="line">@Test</span><br><span class="line">public void testSelectQuery()&#123;</span><br><span class="line">    //创建QuerryWrapper对象</span><br><span class="line">    QueryWrapper&lt;User&gt; wrapper = new QueryWrapper&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    //通过QuerryWrapper设置条件</span><br><span class="line">    wrapper.between(&quot;age&quot;,20,30);//第一个参数字段的名字，第二个和第三个参数查询的值</span><br><span class="line">    List&lt;User&gt; users = userMapper.selectList(wrapper);</span><br><span class="line">    System.out.println(users);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>like：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">//mp实现复杂查询操作</span><br><span class="line">@Test</span><br><span class="line">public void testSelectQuery()&#123;</span><br><span class="line">    //创建QuerryWrapper对象</span><br><span class="line">    QueryWrapper&lt;User&gt; wrapper = new QueryWrapper&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    //通过QuerryWrapper设置条件</span><br><span class="line">    wrapper.like(&quot;name&quot;,&quot;笨&quot;);//第一个参数字段的名字，第二个参数查询的值</span><br><span class="line">    List&lt;User&gt; users = userMapper.selectList(wrapper);</span><br><span class="line">    System.out.println(users);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>orderByDesc：降序排序</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">//mp实现复杂查询操作</span><br><span class="line">@Test</span><br><span class="line">public void testSelectQuery()&#123;</span><br><span class="line">    //创建QuerryWrapper对象</span><br><span class="line">    QueryWrapper&lt;User&gt; wrapper = new QueryWrapper&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    //通过QuerryWrapper设置条件</span><br><span class="line">    wrapper.orderByDesc(&quot;id&quot;);//第一个参数字段的名字，第二个参数查询的值</span><br><span class="line">    List&lt;User&gt; users = userMapper.selectList(wrapper);</span><br><span class="line">    System.out.println(users);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>last：在语句后面拼接一个语句</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">//mp实现复杂查询操作</span><br><span class="line">@Test</span><br><span class="line">public void testSelectQuery()&#123;</span><br><span class="line">    //创建QuerryWrapper对象</span><br><span class="line">    QueryWrapper&lt;User&gt; wrapper = new QueryWrapper&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    //通过QuerryWrapper设置条件</span><br><span class="line">    wrapper.last(&quot;limit 2&quot;);//表示拼接的内容，如limit就是添加限制条件</span><br><span class="line">    List&lt;User&gt; users = userMapper.selectList(wrapper);</span><br><span class="line">    System.out.println(users);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>指定查询的列</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">//mp实现复杂查询操作</span><br><span class="line">@Test</span><br><span class="line">public void testSelectQuery()&#123;</span><br><span class="line">    //创建QuerryWrapper对象</span><br><span class="line">    QueryWrapper&lt;User&gt; wrapper = new QueryWrapper&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    //通过QuerryWrapper设置条件</span><br><span class="line">    wrapper.select(&quot;id&quot;,&quot;name&quot;);//表示拼接几行内容</span><br><span class="line">    List&lt;User&gt; users = userMapper.selectList(wrapper);</span><br><span class="line">    System.out.println(users);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="前后端分离开发概念"><a href="#前后端分离开发概念" class="headerlink" title="前后端分离开发概念"></a>前后端分离开发概念</h1><p>你在项目中有些过接口的吗，问的是开发controller service mapper过程，不是interface</p>
<p><img src="../pic/%E5%9C%A8%E7%BA%BF%E6%95%99%E8%82%B2%E9%A1%B9%E7%9B%AE/image-20210609122641711.png" alt="image-20210609122641711"></p>
<h1 id="讲师管理模块（后端）http-localhost-8001-swagger-ui-html"><a href="#讲师管理模块（后端）http-localhost-8001-swagger-ui-html" class="headerlink" title="讲师管理模块（后端）http://localhost:8001/swagger-ui.html"></a>讲师管理模块（后端）<a target="_blank" rel="noopener" href="http://localhost:8001/swagger-ui.html">http://localhost:8001/swagger-ui.html</a></h1><p>1.创建数据库，创建讲师数据库</p>
<p>guli_edu.sql</p>
<p>2.创建项目结构</p>
<p>​    创建父工程 pom类型 管理依赖版本和放公共依赖</p>
<p>​            子模块 </p>
<p>​                    子子模块</p>
<p><img src="../pic/%E5%9C%A8%E7%BA%BF%E6%95%99%E8%82%B2%E9%A1%B9%E7%9B%AE/image-20210609140427718.png" alt="image-20210609140427718"></p>
<p>项目模块结构</p>
<p><img src="../pic/%E5%9C%A8%E7%BA%BF%E6%95%99%E8%82%B2%E9%A1%B9%E7%9B%AE/image-20210609144305720.png" alt="image-20210609144305720"></p>
<p>3.创建application.properties配置文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># 服务端口</span><br><span class="line">server.port=8001</span><br><span class="line"># 服务名</span><br><span class="line">spring.application.name=service-edu</span><br><span class="line"># 环境设置：dev、test、prod</span><br><span class="line">spring.profiles.active=dev</span><br><span class="line"># mysql数据库连接</span><br><span class="line">spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver</span><br><span class="line">spring.datasource.url=jdbc:mysql://localhost:3306/guli?serverTimezone=GMT%2B8</span><br><span class="line">spring.datasource.username=root</span><br><span class="line">spring.datasource.password=root</span><br><span class="line">#mybatis日志</span><br><span class="line">mybatis-plus.configuration.log-impl=org.apache.ibatis.logging.stdout.StdOutImpl</span><br></pre></td></tr></table></figure>

<p>4.编写controller mapper service</p>
<p>​    利用mp提供的代码生成器，生成相关代码</p>
<p>​    代码生成器yyds（像极了没见过世面的小破孩</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line">package com.atguigu.demo;</span><br><span class="line"></span><br><span class="line">import com.baomidou.mybatisplus.annotation.DbType;</span><br><span class="line">import com.baomidou.mybatisplus.annotation.IdType;</span><br><span class="line">import com.baomidou.mybatisplus.generator.AutoGenerator;</span><br><span class="line">import com.baomidou.mybatisplus.generator.config.DataSourceConfig;</span><br><span class="line">import com.baomidou.mybatisplus.generator.config.GlobalConfig;</span><br><span class="line">import com.baomidou.mybatisplus.generator.config.PackageConfig;</span><br><span class="line">import com.baomidou.mybatisplus.generator.config.StrategyConfig;</span><br><span class="line">import com.baomidou.mybatisplus.generator.config.rules.DateType;</span><br><span class="line">import com.baomidou.mybatisplus.generator.config.rules.NamingStrategy;</span><br><span class="line">import org.junit.Test;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * @author</span><br><span class="line"> * @since 2018/12/13</span><br><span class="line"> */</span><br><span class="line">public class CodeGenerator &#123;</span><br><span class="line"></span><br><span class="line">    @Test</span><br><span class="line">    public void run() &#123;</span><br><span class="line"></span><br><span class="line">        // 1、创建代码生成器</span><br><span class="line">        AutoGenerator mpg = new AutoGenerator();</span><br><span class="line"></span><br><span class="line">        // 2、全局配置</span><br><span class="line">        GlobalConfig gc = new GlobalConfig();</span><br><span class="line">        String projectPath = System.getProperty(&quot;user.dir&quot;);</span><br><span class="line">        gc.setOutputDir(&quot;C:\\Users\\jiang\\guli_parent\\service\\service_edu&quot; + &quot;/src/main/java&quot;);</span><br><span class="line"></span><br><span class="line">        gc.setAuthor(&quot;testjava&quot;);</span><br><span class="line">        gc.setOpen(false); //生成后是否打开资源管理器</span><br><span class="line">        gc.setFileOverride(false); //重新生成时文件是否覆盖</span><br><span class="line"></span><br><span class="line">        //UserServie</span><br><span class="line">        gc.setServiceName(&quot;%sService&quot;);    //去掉Service接口的首字母I</span><br><span class="line"></span><br><span class="line">        gc.setIdType(IdType.ID_WORKER_STR); //主键策略</span><br><span class="line">        gc.setDateType(DateType.ONLY_DATE);//定义生成的实体类中日期类型</span><br><span class="line">        gc.setSwagger2(true);//开启Swagger2模式</span><br><span class="line"></span><br><span class="line">        mpg.setGlobalConfig(gc);</span><br><span class="line"></span><br><span class="line">        // 3、数据源配置</span><br><span class="line">        DataSourceConfig dsc = new DataSourceConfig();</span><br><span class="line">        dsc.setUrl(&quot;jdbc:mysql://localhost:3306/guli?serverTimezone=GMT%2B8&quot;);</span><br><span class="line">        dsc.setDriverName(&quot;com.mysql.cj.jdbc.Driver&quot;);</span><br><span class="line">        dsc.setUsername(&quot;root&quot;);</span><br><span class="line">        dsc.setPassword(&quot;root&quot;);</span><br><span class="line">        dsc.setDbType(DbType.MYSQL);</span><br><span class="line">        mpg.setDataSource(dsc);</span><br><span class="line"></span><br><span class="line">        // 4、包配置</span><br><span class="line">        PackageConfig pc = new PackageConfig();</span><br><span class="line">        pc.setModuleName(&quot;eduservice&quot;); //模块名</span><br><span class="line">        //包  com.atguigu.eduservice</span><br><span class="line">        pc.setParent(&quot;com.atguigu&quot;);</span><br><span class="line">        //包  com.atguigu.eduservice.controller</span><br><span class="line">        pc.setController(&quot;controller&quot;);</span><br><span class="line">        pc.setEntity(&quot;entity&quot;);</span><br><span class="line">        pc.setService(&quot;service&quot;);</span><br><span class="line">        pc.setMapper(&quot;mapper&quot;);</span><br><span class="line">        mpg.setPackageInfo(pc);</span><br><span class="line"></span><br><span class="line">        // 5、策略配置</span><br><span class="line">        StrategyConfig strategy = new StrategyConfig();</span><br><span class="line"></span><br><span class="line">        strategy.setInclude(&quot;edu_teacher&quot;);</span><br><span class="line"></span><br><span class="line">        strategy.setNaming(NamingStrategy.underline_to_camel);//数据库表映射到实体的命名策略</span><br><span class="line">        strategy.setTablePrefix(pc.getModuleName() + &quot;_&quot;); //生成实体时去掉表前缀</span><br><span class="line"></span><br><span class="line">        strategy.setColumnNaming(NamingStrategy.underline_to_camel);//数据库表字段映射到实体的命名策略</span><br><span class="line">        strategy.setEntityLombokModel(true); // lombok 模型 @Accessors(chain = true) setter链式操作</span><br><span class="line"></span><br><span class="line">        strategy.setRestControllerStyle(true); //restful api风格控制器</span><br><span class="line">        strategy.setControllerMappingHyphenStyle(true); //url中驼峰转连字符</span><br><span class="line"></span><br><span class="line">        mpg.setStrategy(strategy);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        // 6、执行</span><br><span class="line">        mpg.execute();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>5.写Controller，把service注入</p>
<p>在controll中注入service，在service中注入mapper</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">//把service注入</span><br><span class="line">@Autowired</span><br><span class="line">private EduTeacherService teacherService;</span><br><span class="line"></span><br><span class="line">//查询讲师表所有数据</span><br><span class="line">//rest风格</span><br><span class="line">@GetMapping(&quot;findAll&quot;)</span><br><span class="line">public List&lt;EduTeacher&gt; findAllTeacher()&#123;</span><br><span class="line">    //调用service里面的方法实现查询所有的操作</span><br><span class="line">    List&lt;EduTeacher&gt; list = teacherService.list(null);</span><br><span class="line">    return list;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>6.创建启动类</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">@SpringBootApplication</span><br><span class="line">public class EduApplication &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        SpringApplication.run(EduApplication.class,args);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>7.创建一个配置类，配置mapper扫描和其他</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">@Configuration</span><br><span class="line">@MapperScan(&quot;com.atguigu.eduservice.mapper&quot;)</span><br><span class="line">public class EduConfig &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>8.启动</p>
<p><a target="_blank" rel="noopener" href="http://localhost:8001/eduservice/teacher/findAll">localhost:8001/eduservice/teacher/findAll</a></p>
<h2 id="统一返回的json的时间格式"><a href="#统一返回的json的时间格式" class="headerlink" title="统一返回的json的时间格式"></a>统一返回的json的时间格式</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#返回json的全局时间格式</span><br><span class="line">spring.jackson.date-format=yyyy-MM-dd HH:mm:ss</span><br><span class="line">spring.jackson.time-zone=GMT+8</span><br></pre></td></tr></table></figure>

<h2 id="讲师逻辑删除功能"><a href="#讲师逻辑删除功能" class="headerlink" title="讲师逻辑删除功能"></a>讲师逻辑删除功能</h2><p>1.EduTeacherController中添加删除方法</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//删除方法</span><br><span class="line">@DeleteMapping(&quot;&#123;id&#125;&quot;)</span><br><span class="line">public boolean removeById(@PathVariable String id)&#123;</span><br><span class="line">    return teacherService.removeById(id);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2.配置逻辑删除插件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * 逻辑删除插件</span><br><span class="line"> */</span><br><span class="line">@Bean</span><br><span class="line">public ISqlInjector sqlInjector() &#123;</span><br><span class="line">    return new LogicSqlInjector();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>3.记得加注解</p>
<p>4.借助一些工具进行测试</p>
<p>​    swagger测试（重点）</p>
<p>​    postman（了解）</p>
<h3 id="swagger"><a href="#swagger" class="headerlink" title="swagger"></a>swagger</h3><p>生成在线接口文档</p>
<p>方便接口测试</p>
<p>1.创建公共模块，</p>
<p><img src="../pic/%E5%9C%A8%E7%BA%BF%E6%95%99%E8%82%B2%E9%A1%B9%E7%9B%AE/image-20210609171419675.png" alt="image-20210609171419675"></p>
<p>2.添加配置类注解</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">@Configuration//配置类</span><br><span class="line">@EnableSwagger2//swagger配置类注解</span><br><span class="line">public class SwaggerConfig &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>3.在类中添加方法</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">@Configuration//配置类</span><br><span class="line">@EnableSwagger2//swagger配置类注解</span><br><span class="line">public class SwaggerConfig &#123;</span><br><span class="line">    @Bean</span><br><span class="line">    public Docket webApiConfig()&#123;</span><br><span class="line">        return new Docket(DocumentationType.SWAGGER_2)</span><br><span class="line">                .groupName(&quot;webApi&quot;)</span><br><span class="line">                .apiInfo(webApiInfo())</span><br><span class="line">                .select()</span><br><span class="line">                .paths(Predicates.not(PathSelectors.regex(&quot;/admin/.*&quot;)))</span><br><span class="line">                .paths(Predicates.not(PathSelectors.regex(&quot;/error.*&quot;)))</span><br><span class="line">                .build();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private ApiInfo webApiInfo()&#123;</span><br><span class="line">        return new ApiInfoBuilder()</span><br><span class="line">                .title(&quot;网站-课程中心API文档&quot;)</span><br><span class="line">                .description(&quot;本文档描述了课程中心微服务接口定义&quot;)</span><br><span class="line">                .version(&quot;1.0&quot;)</span><br><span class="line">                .contact(new Contact(&quot;Helen&quot;, &quot;http://atguigu.com&quot;, &quot;55317332@qq.com&quot;))</span><br><span class="line">                .build();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>4.具体使用</p>
<p>在service模块中引入service-base依赖</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;com.atguigu&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;service_base&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>

<p>好方便哦</p>
<p>5.在启动类中添加common包的注解</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">@SpringBootApplication</span><br><span class="line">@ComponentScan(basePackages = &#123;&quot;com.atguigu&quot;&#125;)</span><br><span class="line">public class EduApplication &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        SpringApplication.run(EduApplication.class,args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>6.测试</p>
<p>​    启动项目</p>
<p>​    <a target="_blank" rel="noopener" href="http://localhost:8001/swagger-ui.html">Swagger UI</a></p>
<p>7.API模型</p>
<h3 id="统一返回格式"><a href="#统一返回格式" class="headerlink" title="统一返回格式"></a>统一返回格式</h3><p>json数据格式2种</p>
<p>对象：</p>
<p>数组：</p>
<p>{</p>
<p>“success”:布尔//响应是否成功</p>
<p>“code”:数字//响应码</p>
<p>“message”:字符串//返回消息</p>
<p>“data”:HashMap//返回数据，放在键值对中</p>
<p>}</p>
<p>1.在common中创建子模块</p>
<p><img src="../pic/%E5%9C%A8%E7%BA%BF%E6%95%99%E8%82%B2%E9%A1%B9%E7%9B%AE/image-20210609205748802.png" alt="image-20210609205748802"></p>
<p>2.创建接口返回码</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">package com.atguigu.commonutils;</span><br><span class="line"></span><br><span class="line">public interface ResultCode &#123;</span><br><span class="line"></span><br><span class="line">    public static Integer SUCCESS = 20000;</span><br><span class="line"></span><br><span class="line">    public static Integer ERROR = 20001;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>3.定义返回数据模式</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">@Data</span><br><span class="line">public class R &#123;</span><br><span class="line"></span><br><span class="line">    @ApiModelProperty(value = &quot;是否成功&quot;)</span><br><span class="line">    private Boolean success;</span><br><span class="line"></span><br><span class="line">    @ApiModelProperty(value = &quot;返回码&quot;)</span><br><span class="line">    private Integer code;</span><br><span class="line">    @ApiModelProperty(value = &quot;返回消息&quot;)</span><br><span class="line">    private String message;</span><br><span class="line"></span><br><span class="line">    @ApiModelProperty(value = &quot;返回数据&quot;)</span><br><span class="line">    private Map&lt;String, Object&gt; data = new HashMap&lt;String, Object&gt;();</span><br><span class="line"></span><br><span class="line">    //构造方法私有化</span><br><span class="line">    private R()&#123;&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    //链式编程</span><br><span class="line"></span><br><span class="line">    public static R ok()&#123;</span><br><span class="line">        R r = new R();</span><br><span class="line">        r.setSuccess(true);</span><br><span class="line">        r.setCode(ResultCode.SUCCESS);</span><br><span class="line">        r.setMessage(&quot;成功&quot;);</span><br><span class="line">        return r;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static R error()&#123;</span><br><span class="line">        R r = new R();</span><br><span class="line">        r.setSuccess(false);</span><br><span class="line">        r.setCode(ResultCode.ERROR);</span><br><span class="line">        r.setMessage(&quot;失败&quot;);</span><br><span class="line">        return r;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public R success(Boolean success)&#123;</span><br><span class="line">        this.setSuccess(success);</span><br><span class="line">        return this;</span><br><span class="line">    &#125;</span><br><span class="line">    public R message(String message)&#123;</span><br><span class="line">        this.setMessage(message);</span><br><span class="line">        return this;</span><br><span class="line">    &#125;</span><br><span class="line">    public R code(Integer code)&#123;</span><br><span class="line">        this.setCode(code);</span><br><span class="line">        return this;</span><br><span class="line">    &#125;</span><br><span class="line">    public R data(String key, Object value)&#123;</span><br><span class="line">        this.data.put(key, value);</span><br><span class="line">        return this;</span><br><span class="line">    &#125;</span><br><span class="line">    public R data(Map&lt;String, Object&gt; map)&#123;</span><br><span class="line">        this.setData(map);</span><br><span class="line">        return this;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>4.使用统一返回结果</p>
<p> （1）在servece中引入common_utils</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;com.atguigu&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;common_utils&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>

<p>​    (2)    把接口的返回结果都是R</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">//查询讲师表所有数据</span><br><span class="line">//rest风格</span><br><span class="line">@ApiOperation(value =&quot;所有讲师列表&quot;)</span><br><span class="line">@GetMapping(&quot;findAll&quot;)</span><br><span class="line">public R findAllTeacher()&#123;</span><br><span class="line">    //调用service里面的方法实现查询所有的操作</span><br><span class="line">    List&lt;EduTeacher&gt; list = teacherService.list(null);</span><br><span class="line">    return R.ok().data(&quot;items&quot;,list);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//删除方法</span><br><span class="line">@DeleteMapping(&quot;&#123;id&#125;&quot;) //id值通过路径传id值</span><br><span class="line">@ApiOperation(value = &quot;逻辑删除讲师&quot;)</span><br><span class="line">public R removeTeacher( @ApiParam(name = &quot;id&quot;, value = &quot;讲师id&quot;,required = true) @PathVariable String id)&#123;//得到路径值参数</span><br><span class="line">    boolean b = teacherService.removeById(id);</span><br><span class="line">    if(b)&#123;</span><br><span class="line">        return R.ok();</span><br><span class="line">    &#125;else&#123;</span><br><span class="line">        return R.error();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="讲师分页功能"><a href="#讲师分页功能" class="headerlink" title="讲师分页功能"></a>讲师分页功能</h2><p>1.配置mp分页插件</p>
<p>查看之前分页查询步骤，类似。</p>
<p>2.编写讲师分页查询接口</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">//分页查询方法</span><br><span class="line">@GetMapping(&quot;pageTeacher/&#123;current&#125;/&#123;limit&#125;&quot;)</span><br><span class="line">public R pageListTeacher(@PathVariable long current,@PathVariable long limit)&#123;</span><br><span class="line">    //创建page对象</span><br><span class="line">    Page&lt;EduTeacher&gt; pageTeacher = new Page&lt;&gt;(current,limit);</span><br><span class="line">    //调用方法实现分页</span><br><span class="line">    //调用方法时候，底层封装，把分页所有数据分装到pageTeacher对象里面</span><br><span class="line">    teacherService.page(pageTeacher,null);</span><br><span class="line">    long total = pageTeacher.getTotal();</span><br><span class="line">    List&lt;EduTeacher&gt; records = pageTeacher.getRecords();//数据list集合</span><br><span class="line">    return R.ok().data(&quot;total&quot;,total).data(&quot;rows&quot;,records);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="条件查询分页"><a href="#条件查询分页" class="headerlink" title="## 条件查询分页"></a>## 条件查询分页</h3><p>第一步：把条件值传递到接口里面</p>
<p>把条件值分装到对象里面，把对象传递到接口里面。vo？？？</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">public class TeacherQuery &#123;</span><br><span class="line"></span><br><span class="line">    @ApiModelProperty(value = &quot;教师名称,模糊查询&quot;)</span><br><span class="line">    private String name;</span><br><span class="line"></span><br><span class="line">    @ApiModelProperty(value = &quot;头衔 1高级讲师 2首席讲师&quot;)</span><br><span class="line">    private Integer level;</span><br><span class="line"></span><br><span class="line">    @ApiModelProperty(value = &quot;查询开始时间&quot;, example = &quot;2019-01-01 10:10:10&quot;)</span><br><span class="line">    private String begin;//注意，这里使用的是String类型，前端传过来的数据无需进行类型转换</span><br><span class="line"></span><br><span class="line">    @ApiModelProperty(value = &quot;查询结束时间&quot;, example = &quot;2019-12-01 10:10:10&quot;)</span><br><span class="line">    private String end;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>第二步编写讲师条件查询接口</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">//4条件查询带分页得方法</span><br><span class="line">@GetMapping(&quot;pageTeacherCondition/&#123;current&#125;/&#123;limit&#125;&quot;)</span><br><span class="line">public R pageTeacherCondition(@PathVariable long current, @PathVariable long limit, TeacherQuery teacherQuery)&#123;</span><br><span class="line">    //创建page对象</span><br><span class="line">    Page&lt;EduTeacher&gt; pageTeacher = new Page&lt;&gt;(current,limit);</span><br><span class="line">    //构建条件</span><br><span class="line">    QueryWrapper&lt;EduTeacher&gt; wrapper = new QueryWrapper&lt;&gt;();</span><br><span class="line">    </span><br><span class="line">    //调用方法实现条件查询分页</span><br><span class="line">    long total = pageTeacher.getTotal();</span><br><span class="line">    List&lt;EduTeacher&gt; records = pageTeacher.getRecords();//数据list集合</span><br><span class="line">    teacherService.page(pageTeacher,wrapper);</span><br><span class="line">    return R.ok().data(&quot;total&quot;,total).data(&quot;rows&quot;,records);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>3.第三步写条件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">//构建条件</span><br><span class="line">QueryWrapper&lt;EduTeacher&gt; wrapper = new QueryWrapper&lt;&gt;();</span><br><span class="line">//wrapper多条件组合查询</span><br><span class="line">//mybatis学过 动态sql</span><br><span class="line">//判断条件值是否为空，如果不为空拼接条件</span><br><span class="line">String name = teacherQuery.getName();</span><br><span class="line">Integer level = teacherQuery.getLevel();</span><br><span class="line">String begin = teacherQuery.getBegin();</span><br><span class="line">String end = teacherQuery.getEnd();</span><br><span class="line">//判断条件之是否为空，如果不为空拼接条件</span><br><span class="line">if(!StringUtils.isEmpty(name))&#123;</span><br><span class="line">    wrapper.like(&quot;name&quot;,name);</span><br><span class="line">&#125;</span><br><span class="line">if(!StringUtils.isEmpty(level))&#123;</span><br><span class="line">    wrapper.eq(&quot;level&quot;,level);</span><br><span class="line">&#125;</span><br><span class="line">if(!StringUtils.isEmpty(begin))&#123;</span><br><span class="line">    wrapper.ge(&quot;gmt_create&quot;,begin);//字段名称噢</span><br><span class="line">&#125;</span><br><span class="line">if(!StringUtils.isEmpty(level))&#123;</span><br><span class="line">    wrapper.le(&quot;gmt_create&quot;,end);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//调用方法实现条件查询分页</span><br><span class="line">teacherService.page(pageTeacher,wrapper);//这个一定要先传进去！！</span><br><span class="line">long total = pageTeacher.getTotal();</span><br><span class="line">List&lt;EduTeacher&gt; records = pageTeacher.getRecords();//数据list集合</span><br><span class="line">return R.ok().data(&quot;total&quot;,total).data(&quot;rows&quot;,records);</span><br></pre></td></tr></table></figure>

<h2 id="添加讲师"><a href="#添加讲师" class="headerlink" title="添加讲师"></a>添加讲师</h2><p>第一步在service-base模块中添加</p>
<p><strong>创建包handler，创建自动填充类 MyMetaObjectHandler</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">@Component</span><br><span class="line">public class MyMetaObjectHandler implements MetaObjectHandler &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void insertFill(MetaObject metaObject) &#123;</span><br><span class="line">        this.setFieldValByName(&quot;gmtCreate&quot;, new Date(), metaObject);</span><br><span class="line">        this.setFieldValByName(&quot;gmtModified&quot;, new Date(), metaObject);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void updateFill(MetaObject metaObject) &#123;</span><br><span class="line">        this.setFieldValByName(&quot;gmtModified&quot;, new Date(), metaObject);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2.在实体类添加自动填充注解</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">@ApiModelProperty(value = &quot;创建时间&quot;)</span><br><span class="line">@TableField(fill = FieldFill.INSERT)</span><br><span class="line">private Date gmtCreate;</span><br><span class="line"></span><br><span class="line">@ApiModelProperty(value = &quot;更新时间&quot;)</span><br><span class="line">@TableField(fill = FieldFill.INSERT_UPDATE)</span><br><span class="line">private Date gmtModified;</span><br></pre></td></tr></table></figure>

<p>注意：wrapper中穿的是数据库中表中的字段名，自动填充的时候传的是类中的属性名。</p>
<p>3.在controller中添加讲师接口的方法</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">//5添加讲师接口的方法</span><br><span class="line">@PostMapping(&quot;addTeacher&quot;)</span><br><span class="line">public R addTeacher(@RequestBody EduTeacher eduTeacher)&#123;</span><br><span class="line">    boolean save = teacherService.save(eduTeacher);</span><br><span class="line">    if(save)&#123;</span><br><span class="line">        return R.ok();</span><br><span class="line">    &#125;else&#123;</span><br><span class="line">        return R.error();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="讲师的修改功能"><a href="#讲师的修改功能" class="headerlink" title="讲师的修改功能"></a>讲师的修改功能</h2><p>1.先根据讲师id进行查询</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//6根据讲师id进行查询</span><br><span class="line">@GetMapping(&quot;getTeacher/&#123;id&#125;&quot;)</span><br><span class="line">public R getTeacher(@PathVariable String id)&#123;</span><br><span class="line">    EduTeacher eduTeacher = teacherService.getById(id);</span><br><span class="line">    return R.ok().data(&quot;teacher&quot;,eduTeacher);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2.修改</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">//7讲师修改功能</span><br><span class="line">@PostMapping(&quot;updateTeacher&quot;)</span><br><span class="line">public R updateTeacher(@RequestBody EduTeacher eduTeacher)&#123;</span><br><span class="line">    boolean b = teacherService.updateById(eduTeacher);</span><br><span class="line">    if(b)&#123;</span><br><span class="line">        return R.ok();</span><br><span class="line">    &#125;else&#123;</span><br><span class="line">        return R.error();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="全局异常处理"><a href="#全局异常处理" class="headerlink" title="全局异常处理"></a>全局异常处理</h2><p>1.在service-base中创建统一异常处理类GlobalExceptionHandler.java：</p>
<p>GlobalExceptionHandler.java中添加异常处理方法</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">@ControllerAdvice</span><br><span class="line">public class GlobalExceptionHandler &#123;</span><br><span class="line">    //指定出现什么异常执行这个方法</span><br><span class="line">    @ExceptionHandler(Exception.class)</span><br><span class="line">    @ResponseBody//这个方法不在controller中所以不会返回数据，为了返回数据</span><br><span class="line">    public R error(Exception e)&#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">        return R.error().message(&quot;执行了全局异常处理&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="特殊异常"><a href="#特殊异常" class="headerlink" title="特殊异常"></a>特殊异常</h2><p>GlobalExceptionHandler.java中添加异常处理方法</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">//特定异常</span><br><span class="line">@ExceptionHandler(ArithmeticException.class)</span><br><span class="line">@ResponseBody//这个方法不在controller中所以不会返回数据，为了返回数据</span><br><span class="line">public R error(ArithmeticException e)&#123;</span><br><span class="line">    e.printStackTrace();</span><br><span class="line">    return R.error().message(&quot;执行了ArithmeticException异常处理&quot;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="自定义异常"><a href="#自定义异常" class="headerlink" title="自定义异常"></a>自定义异常</h2><p>1.创建自定义异常类继承runtimeException</p>
<p>​    写属性</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">import lombok.AllArgsConstructor;</span><br><span class="line">import lombok.Data;</span><br><span class="line">import lombok.NoArgsConstructor;</span><br><span class="line"></span><br><span class="line">@Data //getset方法</span><br><span class="line">@AllArgsConstructor //生成有参数的构造方法</span><br><span class="line">@NoArgsConstructor //生成无参数构造</span><br><span class="line">public class GuliException extends RuntimeException&#123;</span><br><span class="line">    private Integer code;//状态码</span><br><span class="line">    private String msg;//异常信息</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>GlobalExceptionHandler.java中添加异常处理方法</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">//自定义异常异常</span><br><span class="line">@ExceptionHandler(GuliException.class)</span><br><span class="line">@ResponseBody//这个方法不在controller中所以不会返回数据，为了返回数据</span><br><span class="line">public R error(GuliException e)&#123;</span><br><span class="line">    e.printStackTrace();</span><br><span class="line">    return R.error().code(e.getCode()).message(e.getMsg());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="统一日志处理"><a href="#统一日志处理" class="headerlink" title="统一日志处理"></a>统一日志处理</h2><p>1、日志级别：</p>
<p>ERROR、WARN、INFO、DEBUG</p>
<p>2、在application中设置日志级别</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#设置日志级别</span><br><span class="line">logging.level.root=WARN</span><br></pre></td></tr></table></figure>

<p>设置什么级别就只显示当前级别及以上一类的信息</p>
<p>3、把日志不仅输出到控制台，也可以输出到文件，使用日志工具</p>
<p>Logback日志工具</p>
<p>1.删除application中的所有日志配置</p>
<p>2.</p>
<p>安装idea彩色日志插件：grep-console</p>
<p>resources 中创建 logback-spring.xml  //名字固定，勿乱改</p>
<p>3.将固定内容输入到logback-spring.xml文件中</p>
<h3 id="将错误日志输出到文件"><a href="#将错误日志输出到文件" class="headerlink" title="将错误日志输出到文件"></a>将错误日志输出到文件</h3><p>在GlobalExceptionHandler.java中添加注解</p>
<p>@Slf4j</p>
<p>异常输出语句</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">log.error(e.getMessage());</span><br></pre></td></tr></table></figure>

<h1 id="后台系统登陆功能"><a href="#后台系统登陆功能" class="headerlink" title="后台系统登陆功能"></a>后台系统登陆功能</h1><p>1.添加注解</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@RestController</span><br><span class="line">@RequestMapping(&quot;/eduservice/user&quot;)</span><br></pre></td></tr></table></figure>

<p>2.写类</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">public class EduLoginController &#123;</span><br><span class="line"></span><br><span class="line">    //login</span><br><span class="line">    @PostMapping(&quot;login&quot;)</span><br><span class="line">    public R login()&#123;</span><br><span class="line"></span><br><span class="line">        return R.ok().data(&quot;token&quot;,&quot;admin&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //info</span><br><span class="line">    @GetMapping(&quot;info&quot;)</span><br><span class="line">    public  R info()&#123;</span><br><span class="line"></span><br><span class="line">        return R.ok().data(&quot;roles&quot;,&quot;[admin]&quot;).data(&quot;name&quot;,&quot;admin&quot;).data(&quot;avatar&quot;,&quot;https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fn.sinaimg.cn%2Fsinacn20107%2F277%2Fw640h437%2F20200304%2F6d8c-iqfqmau0838979.jpg&amp;refer=http%3A%2F%2Fn.sinaimg.cn&amp;app=2002&amp;size=f9999,10000&amp;q=a80&amp;n=0&amp;g=0n&amp;fmt=jpeg?sec=1626918542&amp;t=f8ae4c403dc2b73f96a147c54845304d&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="3-跨域问题"><a href="#3-跨域问题" class="headerlink" title="3.跨域问题"></a>3.跨域问题</h2><p>通过一个地址去访问另外一个地址，这个过程中如果有三个地方任何一个不一样</p>
<p>访问地址 </p>
<p>ip地址</p>
<p>端口号</p>
<h2 id="4-跨域的解决方式"><a href="#4-跨域的解决方式" class="headerlink" title="4.跨域的解决方式"></a>4.跨域的解决方式</h2><p>（1）在后端接口controller添加注解（常用）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@CrossOrigin //解决跨域</span><br></pre></td></tr></table></figure>

<p>（2）使用网关解决</p>
<p>注意：跨域请求会两次</p>
<p>第一次检测是否连通服务器</p>
<p>第二次再进行请求</p>
<h1 id="阿里云oss开发准备"><a href="#阿里云oss开发准备" class="headerlink" title="阿里云oss开发准备"></a>阿里云oss开发准备</h1><p><img src="../pic/%E5%9C%A8%E7%BA%BF%E6%95%99%E8%82%B2%E9%A1%B9%E7%9B%AE/image-20210624194649796.png" alt="image-20210624194649796"></p>
<table>
<thead>
<tr>
<th align="left">AccessKey ID</th>
<th align="left">AccessKey Secret</th>
<th align="left">状态</th>
<th align="left">最后使用时间</th>
<th align="left">创建时间</th>
<th align="right">操作</th>
</tr>
</thead>
<tbody><tr>
<td align="left">LTAI5tFtxQG4p3UzRXb1bN4f</td>
<td align="left">mUpqmncLYIl6LynhoZ0L3kyyEIQbR5</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="right"></td>
</tr>
</tbody></table>
<p>官方文档 示例代码</p>
<p><a target="_blank" rel="noopener" href="https://help.aliyun.com/document_detail/32010.html?spm=a2c4g.11186623.6.919.be4a26fd58rvbA">初始化 - 对象存储 OSS - 阿里云 (aliyun.com)</a></p>
<table>
<thead>
<tr>
<th align="left">Endpoint（地域节点）</th>
<th align="left">Bucket 域名</th>
<th align="right">HTTPS</th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td align="left">外网访问</td>
<td align="left">oss-cn-beijing.aliyuncs.com</td>
<td align="right">guli-file0823.oss-cn-beijing.aliyuncs.com</td>
<td>支持</td>
</tr>
<tr>
<td align="left">ECS 的经典网络访问（内网）</td>
<td align="left">oss-cn-beijing-internal.aliyuncs.com</td>
<td align="right">guli-file0823.oss-cn-beijing-internal.aliyuncs.com</td>
<td>支持</td>
</tr>
<tr>
<td align="left">ECS 的 VPC 网络访问（内网）</td>
<td align="left">oss-cn-beijing-internal.aliyuncs.com</td>
<td align="right">guli-file0823.oss-cn-beijing-internal.aliyuncs.com</td>
<td>支持</td>
</tr>
</tbody></table>
<h1 id="讲师管理-上传讲师头像"><a href="#讲师管理-上传讲师头像" class="headerlink" title="讲师管理 上传讲师头像"></a>讲师管理 上传讲师头像</h1><p>1.pom中的依赖</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependencies&gt;</span><br><span class="line">    &lt;!-- 阿里云oss依赖 --&gt;</span><br><span class="line">    &lt;dependency&gt;</span><br><span class="line">        &lt;groupId&gt;com.aliyun.oss&lt;/groupId&gt;</span><br><span class="line">        &lt;artifactId&gt;aliyun-sdk-oss&lt;/artifactId&gt;</span><br><span class="line">    &lt;/dependency&gt;</span><br><span class="line">    &lt;!-- 日期工具栏依赖 --&gt;</span><br><span class="line">    &lt;dependency&gt;</span><br><span class="line">        &lt;groupId&gt;joda-time&lt;/groupId&gt;</span><br><span class="line">        &lt;artifactId&gt;joda-time&lt;/artifactId&gt;</span><br><span class="line">    &lt;/dependency&gt;</span><br><span class="line">&lt;/dependencies&gt;</span><br></pre></td></tr></table></figure>

<p>2.创建配置文件application.properties</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">#服务端口</span><br><span class="line">server.port=8002</span><br><span class="line">#服务名</span><br><span class="line">spring.application.name=service-oss</span><br><span class="line"></span><br><span class="line">#环境设置：dev、test、prod</span><br><span class="line">spring.profiles.active=dev</span><br><span class="line"></span><br><span class="line">#阿里云 OSS</span><br><span class="line">#不同的服务器，地址不同</span><br><span class="line">aliyun.oss.file.endpoint=oss-cn-beijing.aliyuncs.com</span><br><span class="line">aliyun.oss.file.keyid=LTAI5tFtxQG4p3UzRXb1bN4f</span><br><span class="line">aliyun.oss.file.keysecret=mUpqmncLYIl6LynhoZ0L3kyyEIQbR5</span><br><span class="line">#bucket可以在控制台创建，也可以使用java代码创建</span><br><span class="line">aliyun.oss.file.bucketname=guli-file0823</span><br></pre></td></tr></table></figure>

<p>3.创建启动类</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">package com.atguigu.oss;</span><br><span class="line"></span><br><span class="line">import org.springframework.boot.SpringApplication;</span><br><span class="line">import org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line">import org.springframework.context.annotation.ComponentScan;</span><br><span class="line"></span><br><span class="line">@SpringBootApplication</span><br><span class="line">@ComponentScan(&#123;&quot;com.atguigu&quot;&#125;)</span><br><span class="line">public class OssApplication &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        SpringApplication.run(OssApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>4.解决报错<img src="../pic/%E5%9C%A8%E7%BA%BF%E6%95%99%E8%82%B2%E9%A1%B9%E7%9B%AE/image-20210624202342109.png" alt="image-20210624202342109"></p>
<p>找不到数据库</p>
<p>在启动类添加属性，默认不去加载数据库配置</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@SpringBootApplication(exclude = DataSourceAutoConfiguration.class)</span><br></pre></td></tr></table></figure>

<p>5.创建一个常量类用来读取配置文件中的内容</p>
<p>用@Value（）注解 </p>
<p>属性注解，将值注入</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">@Component</span><br><span class="line">public class ConstantPropertiesUtils &#123;</span><br><span class="line"></span><br><span class="line">    //读取配置文件内容</span><br><span class="line">    @Value(&quot;$&#123;aliyun.oss.file.endpoint&#125;&quot;)</span><br><span class="line">    private String endpoint;</span><br><span class="line">    </span><br><span class="line">    @Value(&quot;$&#123;aliyun.oss.file.keyid&#125;&quot;)</span><br><span class="line">    private String keyId;</span><br><span class="line"></span><br><span class="line">    @Value(&quot;$&#123;aliyun.oss.file.keysecret&#125;&quot;)</span><br><span class="line">    private String keySecret;</span><br><span class="line"></span><br><span class="line">    @Value(&quot;$&#123;aliyun.oss.file.bucketname&#125;&quot;)</span><br><span class="line">    private String bucketName;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>接口继承initializingbean以读取private</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">//当项目已启动，spring接口，spring加载之后，执行接口一个方法</span><br><span class="line">@Component</span><br><span class="line">public class ConstantPropertiesUtils implements InitializingBean &#123;</span><br><span class="line"></span><br><span class="line">    //读取配置文件内容</span><br><span class="line">    @Value(&quot;$&#123;aliyun.oss.file.endpoint&#125;&quot;)</span><br><span class="line">    private String endpoint;</span><br><span class="line"></span><br><span class="line">    @Value(&quot;$&#123;aliyun.oss.file.keyid&#125;&quot;)</span><br><span class="line">    private String keyId;</span><br><span class="line"></span><br><span class="line">    @Value(&quot;$&#123;aliyun.oss.file.keysecret&#125;&quot;)</span><br><span class="line">    private String keySecret;</span><br><span class="line"></span><br><span class="line">    @Value(&quot;$&#123;aliyun.oss.file.bucketname&#125;&quot;)</span><br><span class="line">    private String bucketName;</span><br><span class="line"></span><br><span class="line">    //定义公开静态常量</span><br><span class="line">    public static String END_POINT;</span><br><span class="line">    public static String KEY_ID;</span><br><span class="line">    public static String KEY_SECRET;</span><br><span class="line">    public static String BUCKET_NAME;</span><br><span class="line">    @Override</span><br><span class="line">    public void afterPropertiesSet() throws Exception &#123;</span><br><span class="line">        //方法会在初始化之后执行</span><br><span class="line">        END_POINT = endpoint;</span><br><span class="line">        KEY_ID = keyId;</span><br><span class="line">        KEY_SECRET = keySecret;</span><br><span class="line">        BUCKET_NAME = bucketName;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>创建包</p>
<p><img src="../pic/%E5%9C%A8%E7%BA%BF%E6%95%99%E8%82%B2%E9%A1%B9%E7%9B%AE/image-20210625160516661.png" alt="image-20210625160516661"></p>
<p>创建controller</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">package com.atguigu.oss.controller;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">import com.atguigu.commonutils.R;</span><br><span class="line">import com.atguigu.oss.service.OssService;</span><br><span class="line">import org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line">import org.springframework.web.bind.annotation.PostMapping;</span><br><span class="line">import org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line">import org.springframework.web.bind.annotation.RestController;</span><br><span class="line">import org.springframework.web.multipart.MultipartFile;</span><br><span class="line"></span><br><span class="line">@RestController</span><br><span class="line">@RequestMapping(&quot;/eduoss/fileoss&quot;)</span><br><span class="line">public class OssController &#123;</span><br><span class="line"></span><br><span class="line">    @Autowired</span><br><span class="line">    private OssService ossService;</span><br><span class="line"></span><br><span class="line">    //上传头像的方法</span><br><span class="line">    @PostMapping</span><br><span class="line">    public R uploadOssFile(MultipartFile file)&#123;</span><br><span class="line">        //获取上传文件 MultipartFile</span><br><span class="line">        //返回上传到oss的路径</span><br><span class="line">        String url = ossService.uploadFileAvatar(file);</span><br><span class="line"></span><br><span class="line">        return R.ok().data(&quot;url&quot;,url);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在service中实现上传头像</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">package com.atguigu.oss.service.impl;</span><br><span class="line"></span><br><span class="line">import com.aliyun.oss.OSS;</span><br><span class="line">import com.aliyun.oss.OSSClientBuilder;</span><br><span class="line">import com.atguigu.oss.service.OssService;</span><br><span class="line">import com.atguigu.oss.utils.ConstantPropertiesUtils;</span><br><span class="line">import org.springframework.stereotype.Service;</span><br><span class="line">import org.springframework.web.multipart.MultipartFile;</span><br><span class="line"></span><br><span class="line">import java.io.InputStream;</span><br><span class="line"></span><br><span class="line">@Service</span><br><span class="line">public class OssServiceImpl implements OssService &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public String uploadFileAvatar(MultipartFile file) &#123;</span><br><span class="line">        //工具类获取值</span><br><span class="line">        String endpoint = ConstantPropertiesUtils.END_POINT;</span><br><span class="line">        String accessKeyId = ConstantPropertiesUtils.KEY_ID;</span><br><span class="line">        String accessKeySecret = ConstantPropertiesUtils.KEY_SECRET;</span><br><span class="line">        String bucketName = ConstantPropertiesUtils.BUCKET_NAME;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        try &#123;</span><br><span class="line">            //创建OSS实例</span><br><span class="line">            OSS ossClient = new OSSClientBuilder().build(endpoint, accessKeyId, accessKeySecret);</span><br><span class="line"></span><br><span class="line">            //获取上传文件输入流</span><br><span class="line">            InputStream inputStream = file.getInputStream();</span><br><span class="line"></span><br><span class="line">            //获取文件名称</span><br><span class="line">            String filename = file.getOriginalFilename();</span><br><span class="line"></span><br><span class="line">            //调用oss方法实现上传</span><br><span class="line">            //第一个参数 bucketName</span><br><span class="line">            //第二个参数 上传到oss文件路劲和文件名称</span><br><span class="line">            //第三个参数 上传文件的输入流</span><br><span class="line">            ossClient.putObject(bucketName, filename, inputStream);</span><br><span class="line"></span><br><span class="line">            //关闭OssClient</span><br><span class="line">            ossClient.shutdown();</span><br><span class="line"></span><br><span class="line">            //把上传之后的文件路径返回</span><br><span class="line">            //需要把上传到阿里云oss路径手动拼接出来</span><br><span class="line">            String url = &quot;https://&quot; + bucketName + &quot;.&quot; + endpoint + &quot;/&quot; + filename;</span><br><span class="line">            return url;</span><br><span class="line">        &#125; catch (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            return null;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


        <p class="suffix-end">__END__</p>
        <div class="suffix-box">
            <div class="suffix-box-left">
                <img src="/image/avatar.jpg" alt="Aomine Daiki">
            </div>
            <div class="suffix-box-right">
                <span class="suffix-box-title">文章作者</span>：Aomine Daiki
                <br>
                <span class="suffix-box-title">文章出处</span>：<a href="/2021/06/06/%E5%9C%A8%E7%BA%BF%E6%95%99%E8%82%B2%E9%A1%B9%E7%9B%AE/" target="_blank">在线教育项目</a>
                <br>
                <span class="suffix-box-title">作者签名</span>：无所求必满载而归.
                <br>
                <span class="suffix-box-title">关于主题</span>：<a href="https://github.com/first19326/Hexo-LiveForCode" target="_blank">Hexo - Live For Code</a>
                <br>
                <span class="suffix-box-title">版权声明</span>：文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-nd/4.0/" title="BY-NC-SA" target="_blank">BY-NC-SA</a> 许可协议，转载请注明出处
                <br>
            </div>
            <div style="clear: both;"></div>
        </div>
    </div>
    <div class="article-footer">
        
            <div class="category">
                分类：
                
                    <a href="/category/%E5%9C%A8%E7%BA%BF%E6%95%99%E8%82%B2%E9%A1%B9%E7%9B%AE/">在线教育项目</a>
                
            </div>
        
        
        <div class="article-prev-next">
            
                <a href="/2021/06/07/6-7/" class="prev-prefix">« </a> 上一篇：    <a href="/2021/06/07/6-7/" title="发布于 2021-06-07 06:58">6-7</a>
                <br>
            
            
                <a href="/2021/06/06/6-6/" class="next-prefix">» </a> 下一篇：    <a href="/2021/06/06/6-6/" title="发布于 2021-06-06 08:29">6-6</a>
            
        </div>
    </div>
    
    <div class="article-comments">
        <div class="comments-title">
            评论列表
        </div>
        <div class="comments-content">
        </div>
    </div>

</div>

    </div>
</div>
    <div id="footer"></div>
    <div id="sidebar">
    <div class="menu-wrap" style="display:none;">
        <nav class="menu">
            <div class="menu-introduce"> 
                <div class="introduce-avatar"></div> 
                <div class="introduce-info"> 
                    <div class="introduce-user"><span></span></div>        
                </div> 
            </div> 
            <div class="menu-list">
                <ul></ul> 
            </div> 
            <div class="menu-link"></div> 
        </nav>
        <button class="menu-button-close"></button>
        <div class="morph-shape" id="morph-shape" data-morph-open="M-7.312,0H15c0,0,66,113.339,66,399.5C81,664.006,15,800,15,800H-7.312V0z;M-7.312,0H100c0,0,0,113.839,0,400c0,264.506,0,400,0,400H-7.312V0z">
            <svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 100 800" preserveAspectRatio="none">
                <path d="M-7.312,0H0c0,0,0,113.839,0,400c0,264.506,0,400,0,400h-7.312V0z"/>
            </svg>
        </div>
    </div>
    <button class="menu-button-open">MENU</button>
    <div class="menu-cover"></div>
</div>
    <link type="text/css" rel="stylesheet" href="https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/css/search.css">
<script type="text/javascript" src="https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/js/iscroll.js"></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/js/instantsearch.min.js"></script>
<div class="search-window">
    <div class="search-content">
        <div class="search-content-icon">
            <i class="iconfont icon-search"></i>
        </div>
        <div id="search-input" class="search-input"></div>
    </div>

    <div class="search-scroll">
        <div class="search-result">
            <div id="search-stats" class="search-stats"></div>
            <div id="search-hits"></div>
            <div id="search-pagination" class="search-pagination"></div>
        </div>
    </div>

    <span class="search-close-icon">
        <i class="iconfont icon-close"></i>
    </span>
</div>
    <div id="tools">
    <div class="progressbar-top"></div>

    
        <link type="text/css" rel="stylesheet" href="https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/css/APlayer.css">
        <script type="text/javascript" src="https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/js/APlayer.min.js"></script>
        <script type="text/javascript" src="https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/js/Meting.min.js"></script>
        <meting-js id="3778678" lrcshow="false" server="netease" type="playlist" fixed="true" autoplay="false" loop="all" order="random" preload="auto" volume="0.67" mutex="true"></meting-js>
    
    
    <div class="wrap-right"></div>
    <div class="loading"></div>
</div>
    <script>
    window.config = {
        GitHubUserName     : 'first19326',
        GitHubRepositories : 'hexo-liveforcode',

        BlogUser      : 'Aomine Daiki',
        BlogAvatar    : '/image/avatar.jpg',
        BlogStartDate : '2020-01-01',

        WebsiteTitleBlur         : '(◍´꒳`◍) Hi, Live For Code',
        WebsiteTitleBlurTimeOut  : 500,
        WebsiteTitleFocus        : '(*´∇｀*) 欢迎回来!',
        WebsiteTitleFocusTimeOut : 1000,
        WebsiteFavicon           : 'https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/image/website/logo.png',

        ProgressBar: {
            id       : 'topProgressBar',
            color    : '#77B6FF',
            height   : '2px',
            duration : 0.2
        },

        Loading: {
            rebound: {
                tension  : 16,
                friction : 5
            },
            spinner: {
                id     : 'spinner',
                radius : 90,
                sides  : 3,
                depth  : 4,
                colors : {
                    background : '#F0F0F0',
                    stroke     : '#272633',
                    base       : '',
                    child      : '#272633'
                },
                alwaysForward : true,
                restAt        : 0.5,
                renderBase    : false
            }
        },

        HomeHeaderAnimationRendered : true,
        HomeHeaderAnimation         : {
            radius      : 15,
            density     : 0.2,
            color       : 'rgba(255, 255, 255, .2)',
            clearOffset : 0.3
        },

        ArticleHeaderAnimationRendered : false,
        ArticleHeaderAnimation         : {
            triW                  : 14,
            triH                  : 20,
            neighbours            : [
                
                    'side',
                
                    'top',
                
                    'bottom',
                
            ],
            speedTrailAppear      : 0.1,
            speedTrailDisappear   : 0.1,
            speedTriOpen          : 1,
            trailMaxLength        : 30,
            trailIntervalCreation : 100,
            delayBeforeDisappear  : 2,
            colors                : [
                
                    '#96EDA6',
                
                    '#5BC6A9',
                
                    '#38668C',
                
                    '#374D84',
                
                    '#BED5CB',
                
                    '#62ADC6',
                
                    '#8EE5DE',
                
                    '#304E7B',
                
            ]
        },

        BackAnimationRendered          : true,
        IEBrowserBackAnimationRendered : false,
        BackAnimation                  : {
            colorSaturation  : '60%',
            colorBrightness  : '50%',
            colorAlpha       : 0.5,
            colorCycleSpeed  : 5,
            verticalPosition : 'random',
            horizontalSpeed  : 200,
            ribbonCount      : 3,
            strokeSize       : 0,
            parallaxAmount   : -0.2,
            animateSections  : true
        },

        HomeHeaderImage : [
            
                'https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/image/header/home.jpg',
            
                'https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/image/header/home.jpeg',
            
        ],
        HomeBannerText  : '',

        ArticleHeaderImage : [
            
                'https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/image/header/article.jpg',
            
        ],

        OtherBannerText : '',

        MenuList : [
            
                {
                    name   : '首页',
                    href   : '/',    
                    target : '',
                    class  : ''
                },
            
                {
                    name   : '标签',
                    href   : '/tag',    
                    target : '',
                    class  : ''
                },
            
                {
                    name   : '分类',
                    href   : '/category',    
                    target : '',
                    class  : ''
                },
            
                {
                    name   : '归档',
                    href   : '/archive',    
                    target : '',
                    class  : ''
                },
            
                {
                    name   : '赞赏',
                    href   : '/donate',    
                    target : '',
                    class  : ''
                },
            
                {
                    name   : '关于',
                    href   : '/about',    
                    target : '',
                    class  : ''
                },
            
                {
                    name   : '订阅',
                    href   : '/atom.xml',    
                    target : '_blank',
                    class  : ''
                },
            
                {
                    name   : '搜索',
                    href   : '',    
                    target : '',
                    class  : 'search'
                },
            
                {
                    name   : '留言板',
                    href   : '/comment',    
                    target : '',
                    class  : ''
                },
            
                {
                    name   : '友情链接',
                    href   : '/friend',    
                    target : '',
                    class  : ''
                },
            
        ],
        MenuLink : [
            
                
                    {
                        icon : 'icon-weibo', 
                        url  : ''
                    },
                
                    {
                        icon : 'icon-wechat', 
                        url  : ''
                    },
                
                    {
                        icon : 'icon-qq', 
                        url  : ''
                    },
                
                    {
                        icon : 'icon-github', 
                        url  : 'https://github.com/first19326'
                    },
                
            
        ],

        FooterStyle : 2,
        BottomText  : {
            icon    : 'like-fill',
            left    : '人生若只如初见',
            right   : '何事秋风悲画扇'
        },
        ThemeInfo   : true,

        ConsoleList : [
            
                
                    [
                        
                            
                                'Based on cnblogs theme SimpleMemory.',
                            
                                '',
                            
                        
                    ],
                
                    [
                        
                            
                                'SimpleMemory Author:',
                            
                                'BNDong',
                            
                        
                    ],
                
                    [
                        
                            
                                'Theme:',
                            
                                'LiveForCode',
                            
                        
                    ],
                
            
        ],

        FontIconExtend : '',

        Donate : {
            paypal  : '',
            bitcoin : '',
            alipay  : '/image/alipay.png',
            wechat  : '/image/wechat.png'
        },

        Code : {
            style : 'normal'
        },  

        Search : {
            applicationID : '010C3EANT8',
            apiKey        : 'c7abab9f11b79102b9aff7fe6d41447d',
            indexName     : 'Notes',
            hits          : {
                page : 10
            },
            labels        : {
                placeholder : '搜索',
                empty       : '未发现与 「${query}」 相关的内容',
                stats       : '${hits} 条相关条目，使用了 ${time} 毫秒',
            }
        }, 

        Valine : {
            switch         : true,
            el             : '.comments-content',
            appId          : 'srhKtvWPQTWYKh3qX8G8M7v0-gzGzoHsz',
            appKey         : '8uVSP1q6UlALVC5igYfIfv2h',
            placeholder    : '你是我一生只会遇见一次的惊喜...',
            avatar         : 'mm',
            meta           : 'nick,mail,link',
            requiredFields : 'nick,mail',
            pageSize       : 5,
            lang           : 'zh-cn',
            visitor        : true,
            enableQQ       : true
        },

        Tocbot : {
            switch                : true,
            tocSelector           : '.toc',
            contentSelector       : '.article-body',
            headingSelector       : 'h1, h2, h3, h4, h5',
            headingsOffset        : 0,
            scrollSmooth          : true,
            scrollSmoothOffset    : -5,
            positionFixedSelector : '.toc',
            positionFixedClass    : 'toc-fixed',
            fixedSidebarOffset    : '',
        },

        Require : {
            baseUrl     : 'https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/js/',
            waitSeconds : 100
        },

        Music : {
            type : 'Meting'
        },
        APlayer : {
            container : '.aplayer',
            fixed     : true,
            autoplay  : false,
            loop      : 'all',
            order     : 'random',
            preload   : 'auto',
            volume    : 0.67,
            mutex     : true,
            lrcType   : 3,
            audio     : [
                
                    {
                        name   : 'aLIEz',
                        artist : 'mizuki（瑞葵）',
                        cover  : '/music/cover/aLIEz.jpg',
                        url    : '/music/song/aLIEz.mp3',
                        lrc    : '/music/lrc/aLIEz.lrc'
                    },
                
                    {
                        name   : 'Endless Tears',
                        artist : 'CLIFF EDGE',
                        cover  : '/music/cover/Endless Tears.jpg',
                        url    : '/music/song/Endless Tears.mp3',
                        lrc    : '/music/lrc/Endless Tears.lrc'
                    },
                
                    {
                        name   : 'Miracle',
                        artist : 'Cascada',
                        cover  : '/music/cover/Miracle.jpg',
                        url    : '/music/song/Miracle.mp3',
                        lrc    : '/music/lrc/Miracle.lrc'
                    },
                
                    {
                        name   : 'Roll The Dice',
                        artist : '高珊',
                        cover  : '/music/cover/Roll The Dice.jpg',
                        url    : '/music/song/Roll The Dice.mp3',
                        lrc    : '/music/lrc/Roll The Dice.lrc'
                    },
                
                    {
                        name   : 'See You Again',
                        artist : 'Charlie Puth, Wiz Khalifa',
                        cover  : '/music/cover/See You Again.jpg',
                        url    : '/music/song/See You Again.mp3',
                        lrc    : '/music/lrc/See You Again.lrc'
                    },
                
                    {
                        name   : 'Traveling Light',
                        artist : 'Joel Hanson, Sara Groves',
                        cover  : '/music/cover/Traveling Light.jpg',
                        url    : '/music/song/Traveling Light.mp3',
                        lrc    : '/music/lrc/Traveling Light.lrc'
                    },
                
                    {
                        name   : '痴心绝对',
                        artist : '李圣杰',
                        cover  : '/music/cover/痴心绝对.jpg',
                        url    : '/music/song/痴心绝对.mp3',
                        lrc    : '/music/lrc/痴心绝对.lrc'
                    },
                
                    {
                        name   : '好想大声说爱你',
                        artist : 'BAAD（バード）',
                        cover  : '/music/cover/好想大声说爱你.jpg',
                        url    : '/music/song/好想大声说爱你.mp3',
                        lrc    : '/music/lrc/好想大声说爱你.lrc'
                    },
                
            ]
        },
        Meting : {
            id       : '3778678', 
            lrcshow  : false, 
            server   : 'netease', 
            type     : 'playlist', 
            fixed    : true, 
            autoplay : false, 
            loop     : 'all', 
            order    : 'random', 
            preload  : 'auto', 
            volume   : 0.67, 
            mutex    : true
        },

        LazyLoad : {
            default : 'https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/image/website/lazyload.svg'
        },
  
        Style : {
            aplayer          : 'https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/css/APlayer.css',
            archive          : 'https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/css/archive.css',
            donate           : 'https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/css/donate.css',
            fancybox         : 'https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/css/jquery.fancybox.css',
            footer           : 'https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/css/footer.css',
            iconfont         : 'https://at.alicdn.com/t/font_1546312_l3yohatebw.css',
            index            : 'https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/css/index.css',
            menuBubble       : 'https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/css/menu-bubble.css',
            page             : 'https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/css/page.css',
            post             : 'https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/css/post.css',
            search           : 'https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/css/search.css',
            tocbot           : 'https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/css/tocbot.css',
            normal           : 'https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/css/normal.css',
            night            : 'https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/css/night.css',
            clipboard        : 'https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/css/clipboard.css'
        },

        Script: {
            aplayer          : 'https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/js/APlayer.min.js',
            config           : 'https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/js/require.config.js',
            index            : 'https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/js/index.js',
            instantSearch    : 'https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/js/instantsearch.min.js',
            jQuery           : 'https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/js/jquery-3.4.1.min.js',
            loading          : 'https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/js/loading.js',
            meting           : 'https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/js/Meting.min.js',
            iscroll          : 'https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/js/iscroll.js',
            require          : 'https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/js/require.min.js'
        },

        Font: {
            LongCang   : 'https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/font/LongCang.css',
            Monda      : 'https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/font/Monda.css',
            NotoSansSC : 'https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/font/NotoSansSC.css',
            Playball   : 'https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/font/Playball.css',
            PTMono     : 'https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/font/PTMono.css',
            RobotoSlab : 'https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/font/RobotoSlab.css',
            Rosario    : 'https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/font/Rosario.css',
            UbuntuMono : 'https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/font/UbuntuMono.css'
        },

        Suffix : {
            about : '无所求必满载而归.'
        },
            
        Theme : {
            url  : 'https://github.com/first19326/Hexo-LiveForCode',
            name : 'Hexo - Live For Code'
        }  
    };
</script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/gh/first19326/cdn@master/static/js/index.js"></script>
</body>
</html>
